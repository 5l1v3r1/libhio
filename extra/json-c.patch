diff -au a/Makefile.am b/Makefile.am
--- a/Makefile.am	2014-04-10 19:47:33.000000000 -0600
+++ b/Makefile.am	2015-12-16 12:15:51.000000000 -0700
@@ -1,6 +1,6 @@
 include Makefile.am.inc

-EXTRA_DIST = README.html README-WIN32.html config.h.win32 doc json-c.vcproj
+EXTRA_DIST = README.html README-WIN32.html config.h.win32 json-c.vcproj
 SUBDIRS = . tests

 lib_LTLIBRARIES = libjson-c.la
@@ -24,7 +24,9 @@
	json_util.h \
	linkhash.h \
	printbuf.h \
-	random_seed.h
+	random_seed.h \
+        math_compat.h \
+        json_rename.h

 #libjsonx_includedir = $(libdir)/json-c-@VERSION@
 #
diff -au a/Makefile.am.inc b/Makefile.am.inc
--- a/Makefile.am.inc	2014-04-10 18:41:08.000000000 -0600
+++ b/Makefile.am.inc	2015-12-16 12:52:34.000000000 -0700
@@ -1,2 +1,2 @@
-AM_CFLAGS = -Wall -Werror -Wno-error=deprecated-declarations -Wextra -Wwrite-strings -Wno-unused-parameter -std=gnu99 -D_GNU_SOURCE -D_REENTRANT
+AM_CFLAGS = -D_GNU_SOURCE -D_REENTRANT

diff -au a/Makefile.in b/Makefile.in
--- a/Makefile.in	2014-04-10 19:48:25.000000000 -0600
+++ b/Makefile.in	2015-12-16 13:30:10.000000000 -0700
@@ -1,4 +1,4 @@
-# Makefile.in generated by automake 1.14 from Makefile.am.
+# Makefile.in generated by automake 1.14.1 from Makefile.am.
 # @configure_input@

 # Copyright (C) 1994-2013 Free Software Foundation, Inc.
@@ -378,8 +378,8 @@
 top_build_prefix = @top_build_prefix@
 top_builddir = @top_builddir@
 top_srcdir = @top_srcdir@
-AM_CFLAGS = -Wall -Werror -Wno-error=deprecated-declarations -Wextra -Wwrite-strings -Wno-unused-parameter -std=gnu99 -D_GNU_SOURCE -D_REENTRANT
-EXTRA_DIST = README.html README-WIN32.html config.h.win32 doc json-c.vcproj
+AM_CFLAGS = -D_GNU_SOURCE -D_REENTRANT
+EXTRA_DIST = README.html README-WIN32.html config.h.win32 json-c.vcproj
 SUBDIRS = . tests
 lib_LTLIBRARIES = libjson-c.la
 pkgconfigdir = $(libdir)/pkgconfig
@@ -400,7 +400,9 @@
	json_util.h \
	linkhash.h \
	printbuf.h \
-	random_seed.h
+	random_seed.h \
+        math_compat.h \
+        json_rename.h


 #libjsonx_includedir = $(libdir)/json-c-@VERSION@
@@ -854,9 +856,10 @@
	  && dc_destdir="$${TMPDIR-/tmp}/am-dc-$$$$/" \
	  && am__cwd=`pwd` \
	  && $(am__cd) $(distdir)/_build \
-	  && ../configure --srcdir=.. --prefix="$$dc_install_base" \
+	  && ../configure \
	    $(AM_DISTCHECK_CONFIGURE_FLAGS) \
	    $(DISTCHECK_CONFIGURE_FLAGS) \
+	    --srcdir=.. --prefix="$$dc_install_base" \
	  && $(MAKE) $(AM_MAKEFLAGS) \
	  && $(MAKE) $(AM_MAKEFLAGS) dvi \
	  && $(MAKE) $(AM_MAKEFLAGS) check \
diff -au a/aclocal.m4 b/aclocal.m4
--- a/aclocal.m4	2014-04-10 19:48:18.000000000 -0600
+++ b/aclocal.m4	2015-12-16 13:30:09.000000000 -0700
@@ -1,4 +1,4 @@
-# generated automatically by aclocal 1.14 -*- Autoconf -*-
+# generated automatically by aclocal 1.14.1 -*- Autoconf -*-

 # Copyright (C) 1996-2013 Free Software Foundation, Inc.

@@ -8622,7 +8622,7 @@
 [am__api_version='1.14'
 dnl Some users find AM_AUTOMAKE_VERSION and mistake it for a way to
 dnl require some minimum version.  Point them to the right macro.
-m4_if([$1], [1.14], [],
+m4_if([$1], [1.14.1], [],
       [AC_FATAL([Do not call $0, use AM_INIT_AUTOMAKE([$1]).])])dnl
 ])

@@ -8638,7 +8638,7 @@
 # Call AM_AUTOMAKE_VERSION and AM_AUTOMAKE_VERSION so they can be traced.
 # This function is AC_REQUIREd by AM_INIT_AUTOMAKE.
 AC_DEFUN([AM_SET_CURRENT_AUTOMAKE_VERSION],
-[AM_AUTOMAKE_VERSION([1.14])dnl
+[AM_AUTOMAKE_VERSION([1.14.1])dnl
 m4_ifndef([AC_AUTOCONF_VERSION],
   [m4_copy([m4_PACKAGE_VERSION], [AC_AUTOCONF_VERSION])])dnl
 _AM_AUTOCONF_VERSION(m4_defn([AC_AUTOCONF_VERSION]))])
diff -au a/arraylist.h b/arraylist.h
--- a/arraylist.h	2014-04-10 18:41:08.000000000 -0600
+++ b/arraylist.h	2015-12-16 12:16:08.000000000 -0700
@@ -12,6 +12,8 @@
 #ifndef _arraylist_h_
 #define _arraylist_h_

+#include "json_rename.h"
+
 #ifdef __cplusplus
 extern "C" {
 #endif
diff -au a/config.h.in b/config.h.in
--- a/config.h.in	2014-04-10 18:42:02.000000000 -0600
+++ b/config.h.in	2015-12-16 13:30:10.000000000 -0700
@@ -32,9 +32,6 @@
 /* Define to 1 if you have the <dlfcn.h> header file. */
 #undef HAVE_DLFCN_H

-/* Define to 1 if you don't have `vprintf' but do have `_doprnt.' */
-#undef HAVE_DOPRNT
-
 /* Define to 1 if you have the <endian.h> header file. */
 #undef HAVE_ENDIAN_H

@@ -50,20 +47,12 @@
 /* Define to 1 if you have the <locale.h> header file. */
 #undef HAVE_LOCALE_H

-/* Define to 1 if your system has a GNU libc compatible `malloc' function, and
-   to 0 otherwise. */
-#undef HAVE_MALLOC
-
 /* Define to 1 if you have the <memory.h> header file. */
 #undef HAVE_MEMORY_H

 /* Define to 1 if you have the `open' function. */
 #undef HAVE_OPEN

-/* Define to 1 if your system has a GNU libc compatible `realloc' function,
-   and to 0 otherwise. */
-#undef HAVE_REALLOC
-
 /* Define to 1 if you have the `setlocale' function. */
 #undef HAVE_SETLOCALE

@@ -118,9 +107,6 @@
 /* Define to 1 if you have the `vasprintf' function. */
 #undef HAVE_VASPRINTF

-/* Define to 1 if you have the `vprintf' function. */
-#undef HAVE_VPRINTF
-
 /* Define to 1 if you have the `vsnprintf' function. */
 #undef HAVE_VSNPRINTF

@@ -164,11 +150,5 @@
 /* Define to empty if `const' does not conform to ANSI C. */
 #undef const

-/* Define to rpl_malloc if the replacement function should be used. */
-#undef malloc
-
-/* Define to rpl_realloc if the replacement function should be used. */
-#undef realloc
-
 /* Define to `unsigned int' if <sys/types.h> does not define. */
 #undef size_t
diff -au a/configure b/configure
--- a/configure	2014-04-10 19:48:23.000000000 -0600
+++ b/configure	2015-12-16 13:30:10.000000000 -0700
@@ -634,6 +634,7 @@
 ac_subst_vars='am__EXEEXT_FALSE
 am__EXEEXT_TRUE
 LTLIBOBJS
+LIBOBJS
 JSON_BSYMBOLIC_LDFLAGS
 OTOOL64
 OTOOL
@@ -662,7 +663,6 @@
 build_cpu
 build
 LIBTOOL
-LIBOBJS
 EGREP
 GREP
 CPP
@@ -4531,221 +4531,6 @@


 # Checks for library functions.
-for ac_func in vprintf
-do :
-  ac_fn_c_check_func "$LINENO" "vprintf" "ac_cv_func_vprintf"
-if test "x$ac_cv_func_vprintf" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_VPRINTF 1
-_ACEOF
-
-ac_fn_c_check_func "$LINENO" "_doprnt" "ac_cv_func__doprnt"
-if test "x$ac_cv_func__doprnt" = xyes; then :
-
-$as_echo "#define HAVE_DOPRNT 1" >>confdefs.h
-
-fi
-
-fi
-done
-
-
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for working memcmp" >&5
-$as_echo_n "checking for working memcmp... " >&6; }
-if ${ac_cv_func_memcmp_working+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test "$cross_compiling" = yes; then :
-  ac_cv_func_memcmp_working=no
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-$ac_includes_default
-int
-main ()
-{
-
-  /* Some versions of memcmp are not 8-bit clean.  */
-  char c0 = '\100', c1 = '\200', c2 = '\201';
-  if (memcmp(&c0, &c2, 1) >= 0 || memcmp(&c1, &c2, 1) >= 0)
-    return 1;
-
-  /* The Next x86 OpenStep bug shows up only when comparing 16 bytes
-     or more and with at least one buffer not starting on a 4-byte boundary.
-     William Lewis provided this test program.   */
-  {
-    char foo[21];
-    char bar[21];
-    int i;
-    for (i = 0; i < 4; i++)
-      {
-	char *a = foo + i;
-	char *b = bar + i;
-	strcpy (a, "--------01111111");
-	strcpy (b, "--------10000000");
-	if (memcmp (a, b, 16) >= 0)
-	  return 1;
-      }
-    return 0;
-  }
-
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
-  ac_cv_func_memcmp_working=yes
-else
-  ac_cv_func_memcmp_working=no
-fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
-  conftest.$ac_objext conftest.beam conftest.$ac_ext
-fi
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_memcmp_working" >&5
-$as_echo "$ac_cv_func_memcmp_working" >&6; }
-test $ac_cv_func_memcmp_working = no && case " $LIBOBJS " in
-  *" memcmp.$ac_objext "* ) ;;
-  *) LIBOBJS="$LIBOBJS memcmp.$ac_objext"
- ;;
-esac
-
-
-for ac_header in stdlib.h
-do :
-  ac_fn_c_check_header_mongrel "$LINENO" "stdlib.h" "ac_cv_header_stdlib_h" "$ac_includes_default"
-if test "x$ac_cv_header_stdlib_h" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_STDLIB_H 1
-_ACEOF
-
-fi
-
-done
-
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU libc compatible malloc" >&5
-$as_echo_n "checking for GNU libc compatible malloc... " >&6; }
-if ${ac_cv_func_malloc_0_nonnull+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test "$cross_compiling" = yes; then :
-  ac_cv_func_malloc_0_nonnull=no
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#if defined STDC_HEADERS || defined HAVE_STDLIB_H
-# include <stdlib.h>
-#else
-char *malloc ();
-#endif
-
-int
-main ()
-{
-return ! malloc (0);
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
-  ac_cv_func_malloc_0_nonnull=yes
-else
-  ac_cv_func_malloc_0_nonnull=no
-fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
-  conftest.$ac_objext conftest.beam conftest.$ac_ext
-fi
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_malloc_0_nonnull" >&5
-$as_echo "$ac_cv_func_malloc_0_nonnull" >&6; }
-if test $ac_cv_func_malloc_0_nonnull = yes; then :
-
-$as_echo "#define HAVE_MALLOC 1" >>confdefs.h
-
-else
-  $as_echo "#define HAVE_MALLOC 0" >>confdefs.h
-
-   case " $LIBOBJS " in
-  *" malloc.$ac_objext "* ) ;;
-  *) LIBOBJS="$LIBOBJS malloc.$ac_objext"
- ;;
-esac
-
-
-$as_echo "#define malloc rpl_malloc" >>confdefs.h
-
-fi
-
-
-for ac_header in stdlib.h
-do :
-  ac_fn_c_check_header_mongrel "$LINENO" "stdlib.h" "ac_cv_header_stdlib_h" "$ac_includes_default"
-if test "x$ac_cv_header_stdlib_h" = xyes; then :
-  cat >>confdefs.h <<_ACEOF
-#define HAVE_STDLIB_H 1
-_ACEOF
-
-fi
-
-done
-
-{ $as_echo "$as_me:${as_lineno-$LINENO}: checking for GNU libc compatible realloc" >&5
-$as_echo_n "checking for GNU libc compatible realloc... " >&6; }
-if ${ac_cv_func_realloc_0_nonnull+:} false; then :
-  $as_echo_n "(cached) " >&6
-else
-  if test "$cross_compiling" = yes; then :
-  ac_cv_func_realloc_0_nonnull=no
-else
-  cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-#if defined STDC_HEADERS || defined HAVE_STDLIB_H
-# include <stdlib.h>
-#else
-char *realloc ();
-#endif
-
-int
-main ()
-{
-return ! realloc (0, 0);
-  ;
-  return 0;
-}
-_ACEOF
-if ac_fn_c_try_run "$LINENO"; then :
-  ac_cv_func_realloc_0_nonnull=yes
-else
-  ac_cv_func_realloc_0_nonnull=no
-fi
-rm -f core *.core core.conftest.* gmon.out bb.out conftest$ac_exeext \
-  conftest.$ac_objext conftest.beam conftest.$ac_ext
-fi
-
-fi
-{ $as_echo "$as_me:${as_lineno-$LINENO}: result: $ac_cv_func_realloc_0_nonnull" >&5
-$as_echo "$ac_cv_func_realloc_0_nonnull" >&6; }
-if test $ac_cv_func_realloc_0_nonnull = yes; then :
-
-$as_echo "#define HAVE_REALLOC 1" >>confdefs.h
-
-else
-  $as_echo "#define HAVE_REALLOC 0" >>confdefs.h
-
-   case " $LIBOBJS " in
-  *" realloc.$ac_objext "* ) ;;
-  *) LIBOBJS="$LIBOBJS realloc.$ac_objext"
- ;;
-esac
-
-
-$as_echo "#define realloc rpl_realloc" >>confdefs.h
-
-fi
-
-
 for ac_func in strcasecmp strdup strerror snprintf vsnprintf vasprintf open vsyslog strncasecmp setlocale
 do :
   as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
diff -au a/configure.ac b/configure.ac
--- a/configure.ac	2014-04-10 19:47:07.000000000 -0600
+++ b/configure.ac	2015-12-16 13:30:03.000000000 -0700
@@ -38,10 +38,6 @@
 AC_TYPE_SIZE_T

 # Checks for library functions.
-AC_FUNC_VPRINTF
-AC_FUNC_MEMCMP
-AC_FUNC_MALLOC
-AC_FUNC_REALLOC
 AC_CHECK_FUNCS(strcasecmp strdup strerror snprintf vsnprintf vasprintf open vsyslog strncasecmp setlocale)
 AC_CHECK_DECLS([INFINITY], [], [], [[#include <math.h>]])
 AC_CHECK_DECLS([nan], [], [], [[#include <math.h>]])
diff -au a/debug.h b/debug.h
--- a/debug.h	2014-04-10 18:41:08.000000000 -0600
+++ b/debug.h	2015-12-16 12:16:08.000000000 -0700
@@ -15,6 +15,8 @@

 #include <stdlib.h>

+#include "json_rename.h"
+
 #ifdef __cplusplus
 extern "C" {
 #endif
diff -au a/json_c_version.h b/json_c_version.h
--- a/json_c_version.h	2014-04-10 19:09:19.000000000 -0600
+++ b/json_c_version.h	2015-12-16 12:16:08.000000000 -0700
@@ -8,6 +8,8 @@
 #ifndef _json_c_version_h_
 #define _json_c_version_h_

+#include "json_rename.h"
+
 #define JSON_C_MAJOR_VERSION 0
 #define JSON_C_MINOR_VERSION 12
 #define JSON_C_MICRO_VERSION 0
diff -au a/json_inttypes.h b/json_inttypes.h
--- a/json_inttypes.h	2014-04-10 18:41:08.000000000 -0600
+++ b/json_inttypes.h	2015-12-16 12:16:08.000000000 -0700
@@ -3,6 +3,7 @@
 #define _json_inttypes_h_

 #include "json_config.h"
+#include "json_rename.h"

 #if defined(_MSC_VER) && _MSC_VER <= 1700

diff -au a/json_tokener.c b/json_tokener.c
--- a/json_tokener.c	2014-04-10 18:41:08.000000000 -0600
+++ b/json_tokener.c	2015-12-16 12:16:08.000000000 -0700
@@ -352,12 +352,10 @@

     case json_tokener_state_inf: /* aka starts with 'i' */
       {
-	int size;
	int size_inf;
	int is_negative = 0;

	printbuf_memappend_fast(tok->pb, &c, 1);
-	size = json_min(tok->st_pos+1, json_null_str_len);
	size_inf = json_min(tok->st_pos+1, json_inf_str_len);
	char *infbuf = tok->pb->buf;
	if (*infbuf == '-')
diff -au a/printbuf.h b/printbuf.h
--- a/printbuf.h	2014-04-10 18:41:08.000000000 -0600
+++ b/printbuf.h	2015-12-16 12:16:08.000000000 -0700
@@ -16,6 +16,8 @@
 #ifndef _printbuf_h_
 #define _printbuf_h_

+#include "json_rename.h"
+
 #ifdef __cplusplus
 extern "C" {
 #endif
diff -au a/random_seed.c b/random_seed.c
--- a/random_seed.c	2014-04-10 18:41:08.000000000 -0600
+++ b/random_seed.c	2015-12-16 12:16:08.000000000 -0700
@@ -12,6 +12,8 @@
 #include <stdio.h>
 #include "config.h"

+#include "json_rename.h"
+
 #define DEBUG_SEED(s)


diff -au a/random_seed.h b/random_seed.h
--- a/random_seed.h	2014-04-10 18:41:08.000000000 -0600
+++ b/random_seed.h	2015-12-16 12:16:08.000000000 -0700
@@ -12,6 +12,8 @@
 #ifndef seed_h
 #define seed_h

+#include "json_rename.h"
+
 #ifdef __cplusplus
 extern "C" {
 #endif
